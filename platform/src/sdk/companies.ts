/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { companiesAddProduct } from "../funcs/companiesAddProduct.js";
import { companiesCreate } from "../funcs/companiesCreate.js";
import { companiesDelete } from "../funcs/companiesDelete.js";
import { companiesGet } from "../funcs/companiesGet.js";
import { companiesGetAccessToken } from "../funcs/companiesGetAccessToken.js";
import { companiesList } from "../funcs/companiesList.js";
import { companiesRefreshProductData } from "../funcs/companiesRefreshProductData.js";
import { companiesRemoveProduct } from "../funcs/companiesRemoveProduct.js";
import { companiesReplace } from "../funcs/companiesReplace.js";
import { companiesUpdate } from "../funcs/companiesUpdate.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "./models/operations/index.js";
import * as shared from "./models/shared/index.js";
import { unwrapAsync } from "./types/fp.js";

export class Companies extends ClientSDK {
  /**
   * List companies
   *
   * @remarks
   * The *List companies* endpoint returns a list of [companies](https://docs.codat.io/platform-api#/schemas/Company) associated to your instances.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   * Each company can have multiple [connections](https://docs.codat.io/platform-api#/schemas/Connection) to different data sources, such as one connection to Xero for accounting data, two connections to Plaid for two bank accounts, and a connection to Zettle for POS data.
   *
   * ## Filter by tags
   *
   * The *List companies* endpoint supports the filtering of companies using [tags](https://docs.codat.io/using-the-api/managing-companies#add-metadata-to-a-company). It supports the following operators with [Codatâ€™s query language](https://docs.codat.io/using-the-api/querying):
   *
   * - equals (`=`)
   * - not equals (`!=`)
   * - contains (`~`)
   *
   * For example, you can use the querying to filter companies tagged with a specific foreign key, region, or owning team:
   * - Foreign key: `uid = {yourCustomerId}`
   * - Region: `region != uk`
   * - Owning team and region: `region = uk && owningTeam = invoice-finance`
   */
  async list(
    request?: operations.ListCompaniesRequest | undefined,
    options?: RequestOptions,
  ): Promise<shared.Companies> {
    return unwrapAsync(companiesList(
      this,
      request,
      options,
    ));
  }

  /**
   * Create company
   *
   * @remarks
   * Use the *Create company* endpoint to create a new [company](https://docs.codat.io/platform-api#/schemas/Company) that represents your customer in Codat.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   * Each company can have multiple [connections](https://docs.codat.io/platform-api#/schemas/Connection) to different data sources, such as one connection to Xero for accounting data, two connections to Plaid for two bank accounts, and a connection to Zettle for POS data.
   *
   * If forbidden characters (see `name` pattern) are present in the request, a company will be created with the forbidden characters removed. For example, `Company (Codat[1])` with be created as `Company Codat1`.
   */
  async create(
    request?: shared.CompanyRequestBody | undefined,
    options?: RequestOptions,
  ): Promise<shared.Company> {
    return unwrapAsync(companiesCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * Get company
   *
   * @remarks
   * The *Get company* endpoint returns a single company for a given `companyId`.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   * Each company can have multiple [connections](https://docs.codat.io/platform-api#/schemas/Connection) to different data sources, such as one connection to Xero for accounting data, two connections to Plaid for two bank accounts, and a connection to Zettle for POS data.
   */
  async get(
    request: operations.GetCompanyRequest,
    options?: RequestOptions,
  ): Promise<shared.Company> {
    return unwrapAsync(companiesGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete a company
   *
   * @remarks
   * The *Delete company* endpoint permanently deletes a [company](https://docs.codat.io/platform-api#/schemas/Company), its [connections](https://docs.codat.io/platform-api#/schemas/Connection) and any cached data. This operation is irreversible.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   * Each company can have multiple [connections](https://docs.codat.io/platform-api#/schemas/Connection) to different data sources, such as one connection to Xero for accounting data, two connections to Plaid for two bank accounts, and a connection to Zettle for POS data.
   */
  async delete(
    request: operations.DeleteCompanyRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(companiesDelete(
      this,
      request,
      options,
    ));
  }

  /**
   * Replace company
   *
   * @remarks
   * Use the *Replace company* endpoint to replace the existing name, description, and tags of the company. Calling the endpoint will replace existing values even if new values haven't been defined in the payload.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   * Each company can have multiple [connections](https://docs.codat.io/platform-api#/schemas/Connection) to different data sources, such as one connection to Xero for accounting data, two connections to Plaid for two bank accounts, and a connection to Zettle for POS data.
   */
  async replace(
    request: operations.ReplaceCompanyRequest,
    options?: RequestOptions,
  ): Promise<shared.Company> {
    return unwrapAsync(companiesReplace(
      this,
      request,
      options,
    ));
  }

  /**
   * Update company
   *
   * @remarks
   * Use the *Update company* endpoint to update the name, description, or tags of the company.
   *
   * The *Update company* endpoint doesn't have any required fields. If any of the fields provided are `null` or not provided, they won't be included in the update.
   *
   * A [company](https://docs.codat.io/platform-api#/schemas/Company) represents a business sharing access to their data.
   */
  async update(
    request: operations.UpdateCompanyRequest,
    options?: RequestOptions,
  ): Promise<shared.Company> {
    return unwrapAsync(companiesUpdate(
      this,
      request,
      options,
    ));
  }

  /**
   * Add product
   *
   * @remarks
   * Use the *Add product* endpoint to enable a product for the company specified by `companyId`.
   *
   * > Note: This feature is currently in alpha and available only to participants in the development program.
   */
  async addProduct(
    request: operations.AddProductRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(companiesAddProduct(
      this,
      request,
      options,
    ));
  }

  /**
   * Remove product
   *
   * @remarks
   * Use the *Remove product* endpoint to disable a product for the company specified by `companyId`.
   *
   * > Note: This feature is currently in alpha and available only to participants in the development program.
   */
  async removeProduct(
    request: operations.RemoveProductRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(companiesRemoveProduct(
      this,
      request,
      options,
    ));
  }

  /**
   * Refresh product data
   *
   * @remarks
   * Use the **Refresh product data** endpoint to manually refresh data for a custom product for a specific company.
   *
   * ### Tips and traps
   *
   * - This endpoint only supports refreshing data for **custom products** and can't be used for Codat's standard solutions. Refer to [individual solutions' documentation](https://docs.codat.io/) instead.
   * - If a data sync is already in progress for a custom product, the refresh request will return a `Bad request (400)` response.
   * - If a company has multiple custom products enabled, you can refresh data for each product individually.
   */
  async refreshProductData(
    request: operations.RefreshProductDataRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(companiesRefreshProductData(
      this,
      request,
      options,
    ));
  }

  /**
   * Get company access token
   *
   * @remarks
   * Use the _Get company access token_ endpoint to return an access token for the specified company ID. The token is valid for one day.
   *
   * The token is required by Codat's embeddable UIs (such as [Connections SDK](https://docs.codat.io/auth-flow/optimize/connection-management) and [Link SDK](https://docs.codat.io/auth-flow/authorize-embedded-link)) to verify the identity of the user and improve the reliability of data provided by them.
   */
  async getAccessToken(
    request: operations.GetCompanyAccessTokenRequest,
    options?: RequestOptions,
  ): Promise<shared.CompanyAccessToken> {
    return unwrapAsync(companiesGetAccessToken(
      this,
      request,
      options,
    ));
  }
}
