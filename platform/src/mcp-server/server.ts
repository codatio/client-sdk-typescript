/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { CodatPlatformCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$companiesAddProduct } from "./tools/companiesAddProduct.js";
import { tool$companiesCreate } from "./tools/companiesCreate.js";
import { tool$companiesDelete } from "./tools/companiesDelete.js";
import { tool$companiesGet } from "./tools/companiesGet.js";
import { tool$companiesGetAccessToken } from "./tools/companiesGetAccessToken.js";
import { tool$companiesList } from "./tools/companiesList.js";
import { tool$companiesRefreshProductData } from "./tools/companiesRefreshProductData.js";
import { tool$companiesRemoveProduct } from "./tools/companiesRemoveProduct.js";
import { tool$companiesReplace } from "./tools/companiesReplace.js";
import { tool$companiesUpdate } from "./tools/companiesUpdate.js";
import { tool$connectionManagementGet } from "./tools/connectionManagementGet.js";
import { tool$connectionsCreate } from "./tools/connectionsCreate.js";
import { tool$connectionsDelete } from "./tools/connectionsDelete.js";
import { tool$connectionsGet } from "./tools/connectionsGet.js";
import { tool$connectionsList } from "./tools/connectionsList.js";
import { tool$connectionsUnlink } from "./tools/connectionsUnlink.js";
import { tool$connectionsUpdateAuthorization } from "./tools/connectionsUpdateAuthorization.js";
import { tool$corsGet } from "./tools/corsGet.js";
import { tool$corsSet } from "./tools/corsSet.js";
import { tool$customDataTypeConfigure } from "./tools/customDataTypeConfigure.js";
import { tool$customDataTypeGetConfiguration } from "./tools/customDataTypeGetConfiguration.js";
import { tool$customDataTypeList } from "./tools/customDataTypeList.js";
import { tool$customDataTypeRefresh } from "./tools/customDataTypeRefresh.js";
import { tool$integrationsGet } from "./tools/integrationsGet.js";
import { tool$integrationsGetBranding } from "./tools/integrationsGetBranding.js";
import { tool$integrationsList } from "./tools/integrationsList.js";
import { tool$pushDataGetModelOptions } from "./tools/pushDataGetModelOptions.js";
import { tool$pushDataGetOperation } from "./tools/pushDataGetOperation.js";
import { tool$pushDataListOperations } from "./tools/pushDataListOperations.js";
import { tool$readDataGetValidationResults } from "./tools/readDataGetValidationResults.js";
import { tool$refreshDataAll } from "./tools/refreshDataAll.js";
import { tool$refreshDataByDataType } from "./tools/refreshDataByDataType.js";
import { tool$refreshDataGet } from "./tools/refreshDataGet.js";
import { tool$refreshDataGetPullOperation } from "./tools/refreshDataGetPullOperation.js";
import { tool$refreshDataListPullOperations } from "./tools/refreshDataListPullOperations.js";
import { tool$settingsCreateApiKey } from "./tools/settingsCreateApiKey.js";
import { tool$settingsDeleteApiKey } from "./tools/settingsDeleteApiKey.js";
import { tool$settingsGet } from "./tools/settingsGet.js";
import { tool$settingsGetProfile } from "./tools/settingsGetProfile.js";
import { tool$settingsGetSyncSettings } from "./tools/settingsGetSyncSettings.js";
import { tool$settingsListApiKeys } from "./tools/settingsListApiKeys.js";
import { tool$settingsSet } from "./tools/settingsSet.js";
import { tool$settingsUpdateProfile } from "./tools/settingsUpdateProfile.js";
import { tool$settingsUpdateSyncSettings } from "./tools/settingsUpdateSyncSettings.js";
import { tool$supplementalDataConfigure } from "./tools/supplementalDataConfigure.js";
import { tool$supplementalDataGetConfiguration } from "./tools/supplementalDataGetConfiguration.js";
import { tool$webhooksCreateConsumer } from "./tools/webhooksCreateConsumer.js";
import { tool$webhooksDeleteConsumer } from "./tools/webhooksDeleteConsumer.js";
import { tool$webhooksListConsumers } from "./tools/webhooksListConsumers.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  authHeader?: SDKOptions["authHeader"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "CodatPlatform",
    version: "6.1.0",
  });

  const client = new CodatPlatformCore({
    authHeader: deps.authHeader,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$companiesList);
  tool(tool$companiesCreate);
  tool(tool$companiesGet);
  tool(tool$companiesDelete);
  tool(tool$companiesReplace);
  tool(tool$companiesUpdate);
  tool(tool$companiesAddProduct);
  tool(tool$companiesRemoveProduct);
  tool(tool$companiesRefreshProductData);
  tool(tool$companiesGetAccessToken);
  tool(tool$connectionsList);
  tool(tool$connectionsCreate);
  tool(tool$connectionsGet);
  tool(tool$connectionsDelete);
  tool(tool$connectionsUnlink);
  tool(tool$connectionsUpdateAuthorization);
  tool(tool$connectionManagementGet);
  tool(tool$corsGet);
  tool(tool$corsSet);
  tool(tool$settingsGet);
  tool(tool$settingsSet);
  tool(tool$settingsGetProfile);
  tool(tool$settingsUpdateProfile);
  tool(tool$settingsGetSyncSettings);
  tool(tool$settingsUpdateSyncSettings);
  tool(tool$settingsListApiKeys);
  tool(tool$settingsCreateApiKey);
  tool(tool$settingsDeleteApiKey);
  tool(tool$refreshDataAll);
  tool(tool$refreshDataByDataType);
  tool(tool$refreshDataGet);
  tool(tool$refreshDataListPullOperations);
  tool(tool$refreshDataGetPullOperation);
  tool(tool$webhooksListConsumers);
  tool(tool$webhooksCreateConsumer);
  tool(tool$webhooksDeleteConsumer);
  tool(tool$integrationsList);
  tool(tool$integrationsGet);
  tool(tool$integrationsGetBranding);
  tool(tool$readDataGetValidationResults);
  tool(tool$pushDataGetModelOptions);
  tool(tool$pushDataListOperations);
  tool(tool$pushDataGetOperation);
  tool(tool$supplementalDataConfigure);
  tool(tool$supplementalDataGetConfiguration);
  tool(tool$customDataTypeConfigure);
  tool(tool$customDataTypeGetConfiguration);
  tool(tool$customDataTypeRefresh);
  tool(tool$customDataTypeList);

  return server;
}
