/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { managedBankFeedsGetLatestSync } from "../funcs/managedBankFeedsGetLatestSync.js";
import { managedBankFeedsGetSync } from "../funcs/managedBankFeedsGetSync.js";
import { managedBankFeedsRunAdHocSync } from "../funcs/managedBankFeedsRunAdHocSync.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "./models/operations/index.js";
import * as shared from "./models/shared/index.js";
import { unwrapAsync } from "./types/fp.js";

export class ManagedBankFeeds extends ClientSDK {
  /**
   * Get sync
   *
   * @remarks
   * The _Get sync_ endpoint returns the [sync status](https://docs.codat.io/bank-feeds-api#/schemas/SyncStatusResult) for a given 'syncId'.
   *
   * A sync is a single execution that fetches bank transactions from a connected bank account and records them in the company's accounting software.
   */
  async getSync(
    request: operations.GetManagedBankFeedSyncRequest,
    options?: RequestOptions,
  ): Promise<shared.SyncStatusResult> {
    return unwrapAsync(managedBankFeedsGetSync(
      this,
      request,
      options,
    ));
  }

  /**
   * Get latest sync
   *
   * @remarks
   * The _Get latest sync_ endpoint returns the status for a given source account's [most recent sync](https://docs.codat.io/bank-feeds-api#/schemas/SyncStatusResult).
   *
   * A sync is a single execution that fetches bank transactions from a connected bank account and records them in the company's accounting software.
   */
  async getLatestSync(
    request: operations.GetLatestManagedBankFeedSyncRequest,
    options?: RequestOptions,
  ): Promise<shared.SyncStatusResult | undefined> {
    return unwrapAsync(managedBankFeedsGetLatestSync(
      this,
      request,
      options,
    ));
  }

  /**
   * Run ad-hoc sync
   *
   * @remarks
   * The _Run ad-hoc sync_ endpoint immediately runs a sync with a fetch period from the last successful sync to the execution time of the new sync.
   *
   * A sync is a single execution that fetches bank transactions from a connected bank account and records them in the company's accounting software.
   *
   * Use either the [_Get latest sync_](https://docs.codat.io/bank-feeds-api#/operations/get-latest-managed-bank-feed-sync) endpoint or the [_Get sync_](https://docs.codat.io/bank-feeds-api#/operations/fetch-managed-bank-feed-sync-by-id) endpoint to get the result of this sync.
   */
  async runAdHocSync(
    request: operations.RunManagedBankFeedAdHocSyncRequest,
    options?: RequestOptions,
  ): Promise<shared.StartScheduledSyncResult> {
    return unwrapAsync(managedBankFeedsRunAdHocSync(
      this,
      request,
      options,
    ));
  }
}
