/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { loanWritebackSourceAccountsCreate } from "../funcs/loanWritebackSourceAccountsCreate.js";
import { loanWritebackSourceAccountsCreateMapping } from "../funcs/loanWritebackSourceAccountsCreateMapping.js";
import { loanWritebackSourceAccountsListMappings } from "../funcs/loanWritebackSourceAccountsListMappings.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "./models/operations/index.js";
import * as shared from "./models/shared/index.js";
import { unwrapAsync } from "./types/fp.js";

export class SourceAccounts extends ClientSDK {
  /**
   * Create source account
   *
   * @remarks
   * The _Create Source Account_ endpoint allows you to create a representation of a bank account within Codat's domain. The company can then map the source account to an existing or new target account in their accounting software.
   *
   * > ### Versioning
   * > If you are integrating the Bank Feeds solution with Codat after August 1, 2024, please use the v2 version of the API, as detailed in the schema below. For integrations completed before August 1, 2024, select the v1 version from the schema dropdown below.
   */
  async create(
    request: operations.CreateSourceAccountRequest,
    options?: RequestOptions,
  ): Promise<operations.CreateSourceAccountResponseBody> {
    return unwrapAsync(loanWritebackSourceAccountsCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * List bank feed account mappings
   *
   * @remarks
   * The *List bank accounts* endpoint returns information about a source bank account and any current or potential target mapping accounts.
   *
   * A bank feed account mapping is a specified link between the source account (provided by the Codat user) and the target account (the end user's account in the underlying software).
   *
   * > **For custom builds only**
   * >
   * > Only use this endpoint if you are building your own account management UI.
   */
  async listMappings(
    request: operations.GetBankAccountMappingRequest,
    options?: RequestOptions,
  ): Promise<Array<shared.BankFeedMapping>> {
    return unwrapAsync(loanWritebackSourceAccountsListMappings(
      this,
      request,
      options,
    ));
  }

  /**
   * Create bank feed account mapping
   *
   * @remarks
   * The *Create bank account mapping* endpoint creates a new mapping between a source bank account and a potential account in the accounting software (target account).
   *
   * A bank feed account mapping is a specified link between the source account (provided by the Codat user) and the target account (the end user's account in the underlying software).
   *
   * To find valid target account options, first call the [List bank feed account mappings](https://docs.codat.io//bank-feeds-api#/operations/get-bank-account-mapping) endpoint.
   *
   * > **For custom builds only**
   * >
   * > Only use this endpoint if you are building your own account management UI.
   *
   * #### Account mapping variability
   *
   * The method of mapping the source account to the target account varies depending on the accounting software your company uses.
   *
   * #### Mapping options:
   *
   * 1. **API Mapping**: Integrate the mapping journey directly into your application for a seamless user experience.
   * 2. **Codat UI Mapping**: If you prefer a quicker setup, you can utilize Codat's provided user interface for mapping.
   * 3. **Accounting Platform Mapping**: For some accounting software, the mapping process must be conducted within the software itself.
   *
   * ### Integration-specific behaviour
   *
   * | Bank Feed Integration | API Mapping | Codat UI Mapping | Accounting Platform Mapping |
   * | --------------------- | ----------- | ---------------- | --------------------------- |
   * | Xero                  | ✅          | ✅               |                             |
   * | FreeAgent             | ✅          | ✅               |                             |
   * | Oracle NetSuite       | ✅          | ✅               |                             |
   * | Exact Online (NL)     | ✅          | ✅               |                             |
   * | QuickBooks Online     |             |                  | ✅                          |
   * | Sage                  |             |                  | ✅                          |
   */
  async createMapping(
    request: operations.CreateBankAccountMappingRequest,
    options?: RequestOptions,
  ): Promise<shared.BankFeedBankAccountMappingResponse> {
    return unwrapAsync(loanWritebackSourceAccountsCreateMapping(
      this,
      request,
      options,
    ));
  }
}
